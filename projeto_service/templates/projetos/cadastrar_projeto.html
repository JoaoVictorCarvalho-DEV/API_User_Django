{% extends "../base/base.html" %}

{% block template %}
    <!-- Conteúdo Principal -->
    <div class="container mt-4">
        <!-- Título da Página -->
        <div class="row text-center">
            <h1> <i class="bi bi-bookmark-check-fill"></i> Cadastrar Projeto</h1>
        </div>

        <!-- Container do Formulário -->
        <div class="container justify-content-center d-flex">

            <div class="card px-5 w-50">

                <br>
                <!-- Formulário de Cadastro -->
                <form id="formProjeto">
                    {% csrf_token %}

                    <!-- Campo Nome do Projeto -->
                    <div class="mb-3">
                        <label for="inputName" class="form-label">Nome do Projeto</label>
                        <input type="text" class="form-control" name="inputName" id="inputName"
                               maxlength="50" required>
                        <div class="invalid-feedback">
                            O nome do projeto deve ter entre 1 e 50 caracteres.
                        </div>
                        <div class="form-text text-end">
                            <span id="nomeCounter">0</span>/50 caracteres
                        </div>
                    </div>

                    <!-- Campo Descrição -->
                    <div class="mb-3">
                        <label for="descricao" class="form-label">Descrição</label>
                        <textarea class="form-control" name="descricao" id="descricao" rows="3" required></textarea>
                        <div class="invalid-feedback">Por favor, insira uma descrição.</div>
                    </div>

                    <!-- Datas (Início e Término) -->
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="dataInicio" class="form-label">Data Inicial</label>
                                <input id="dataInicio" name="dataInicio" class="form-control" type="date" required>
                                <div class="invalid-feedback">Por favor, selecione a data inicial.</div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="dataFinal" class="form-label">Data Final</label>
                                <input id="dataFinal" name="dataFinal" class="form-control" type="date" required>
                                <div class="invalid-feedback">Por favor, selecione a data final.</div>
                            </div>
                        </div>
                    </div>

                    <!-- Seção de Atribuições -->
                    <div class="mb-3">
                        <div class="row text-center mb-3">
                            <h5>Atribuições</h5>
                        </div>

                        <div class="row">
                            <!-- Órgão -->
                            <div class="col-md-4 mb-3">
                                <label for="orgaoId" class="form-label">Órgão</label>
                                <select class="form-select" name="orgaoId" id="orgaoId" required>
                                    <option value="" selected disabled>Selecione</option>
                                    <option value="1">Órgão 1</option>
                                    <option value="2">Órgão 2</option>
                                    <option value="3">Órgão 3</option>
                                </select>
                                <div class="invalid-feedback">Por favor, selecione um órgão.</div>
                            </div>

                            <!-- Analista -->
                            <div class="col-md-4 mb-3">
                                <label for="analista" class="form-label">Analista</label>
                                <select class="form-select" name="analista" id="analista" required>
                                    <option value="" selected disabled>Selecione</option>
                                    <option value="1">Analista 1</option>
                                    <option value="2">Analista 2</option>
                                    <option value="3">Analista 3</option>
                                </select>
                                <div class="invalid-feedback">Por favor, selecione um analista.</div>
                            </div>

                            <!-- Desenvolvedor -->
                            <div class="col-md-4 mb-3">
                                <label for="desenvolvedor" class="form-label">Desenvolvedor</label>
                                <select class="form-select" name="desenvolvedor" id="desenvolvedor" required>
                                    <option value="" selected disabled>Selecione</option>
                                    <option value="1">Desenvolvedor 1</option>
                                    <option value="2">Desenvolvedor 2</option>
                                    <option value="3">Desenvolvedor 3</option>
                                </select>
                                <div class="invalid-feedback">Por favor, selecione um desenvolvedor.</div>
                            </div>
                        </div>
                    </div>

                    <!-- Botão de Envio -->
                    <div class="d-grid gap-2 mb-3">
                        <button  title='Enviar' type="submit" class="btn btn-primary">Enviar</button>
                    </div>
                </form>

                <!-- Mensagem de Feedback -->
                <div id="message" class="alert d-none"></div>
            </div>
        </div>
    </div>

    {% load static %}
    <script src="{% static 'projeto_service/js/cadastrar_projeto.js' %}"></script>
    
    <script>
        carregarOrgaoForm()
        carregarAnalistaForm()
        carregarDesenvolvedorForm()
    </script>

    <style>
        /* Estilo opcional para o contador */
        .text-warning { color: orange; font-weight: bold; }
        .text-danger { color: red; font-weight: bold; }
    </style>
{% endblock %}